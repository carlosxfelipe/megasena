import Head from "next/head";
import { useEffect, useState } from "react";
import {
  Container,
  Main,
  Title,
  Description,
  CodeTag,
} from "../components/sharedstyles";
import Cards from "../components/cards";

import Image from "next/image";
import logoMegasena from "../public/megasena-icon.png";

export default function Home() {
  const [numeros, setNumeros] = useState([]);

  useEffect(() => {
    generateMegaNumbers();
  }, []);

  const getRandomIntInclusive = (min: number, max: number) => {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min + 1)) + min;
  };

  const generateMegaNumbers = () => {
    let array = [];
    const MAX_NUMEROS = 6;
    let i = 0;
    while (i < MAX_NUMEROS) {
      const numeroAleatorio = getRandomIntInclusive(1, 60);
      if (!array.includes(numeroAleatorio)) {
        array.push(numeroAleatorio);
        i++;
      }
    }
    array.sort(function (a, b) {
      return a - b;
    });
    setNumeros(array);
  };

  return (
    <Container>
      <Head>
        <title>Mega-Sena</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Main>
        <Image
          src={logoMegasena}
          alt="Logo Mega-Sena"
          width={100}
          height={100}
        />
        <Title>Mega-Sena</Title>

        <Description>
          Os números que te deixarão rico(a) são:
          <CodeTag>
            {numeros.map((numero, index) => (
              <span key={index}>{numero} </span>
            ))}
          </CodeTag>
        </Description>

        <Cards onClick={generateMegaNumbers} />
      </Main>
    </Container>
  );
}
